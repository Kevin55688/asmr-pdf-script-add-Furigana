# å°ˆæ¡ˆç‹€æ…‹æ‘˜è¦

> æ­¤æª”æ¡ˆç‚ºæ¯æ¬¡ Session **å¿…è®€**çš„ä¸»è¦ç‹€æ…‹æ–‡ä»¶
> HISTORY.md åƒ…åœ¨éœ€è¦æŸ¥è©¢ç´°ç¯€æ™‚æ‰è¼‰å…¥

## å°ˆæ¡ˆè³‡è¨Š

- **å°ˆæ¡ˆåç¨±**ï¼šPDF æŒ¯ã‚Šä»®åæ¨™æ³¨å·¥å…· (asmr_pdf_script_add_Furigana)
- **æŠ€è¡“æ£§**ï¼šPython (FastAPI + PyMuPDF + fugashi/MeCab) / React + TypeScript (Vite)
- **æœ€å¾Œæ›´æ–°**ï¼š2026-02-22ï¼ˆç¿»è­¯åŠŸèƒ½ Task 4 å®Œæˆï¼‰

## å°ˆæ¡ˆç‹€æ…‹ï¼šğŸ”„ ç¿»è­¯åŠŸèƒ½é–‹ç™¼ä¸­ï¼ˆTask 4/5 å®Œæˆï¼‰

## å¾…å®Œæˆé …ç›®

- [ ] Task 5ï¼šPagedPreview æ§åˆ¶åˆ— + ç¿»è­¯é‚è¼¯ + cache

## å·²å®Œæˆé …ç›®

- [2026-02-22] ç¿»è­¯åŠŸèƒ½ Task 4 å®Œæˆï¼š`HtmlPreview` æ”¯æ´ `showRuby` toggle èˆ‡æ®µè½ç¿»è­¯é¡¯ç¤ºï¼ˆ`translations`ã€`isTranslating` skeletonï¼‰ï¼Œ`index.css` åŠ å…¥ `.hide-ruby rt`ï¼Œ9 tests passedï¼Œå‰ç«¯å…± 27 tests passed
- [2026-02-21] ç¿»è­¯åŠŸèƒ½ Task 3 å®Œæˆï¼šå‰ç«¯ `translateTexts` API å‡½å¼ï¼Œ27 tests passed
- [2026-02-21] ç¿»è­¯åŠŸèƒ½ Task 2 å®Œæˆï¼šæ–°å¢ `routers/translate.py` + ä¿®æ”¹ `main.py`ï¼Œ`POST /api/translate` endpointï¼Œ50 tests passed
- [2026-02-21] ç¿»è­¯åŠŸèƒ½ Task 1 å®Œæˆï¼šæ–°å¢ `translator.py`ï¼ˆæ”¯æ´ DeepL / Google / Claudeï¼Œ8 tests passedï¼‰

- [2026-02-13] éœ€æ±‚æ¢è¨ã€æŠ€è¡“æ–¹æ¡ˆé¸å‹ã€ç³»çµ±æ¶æ§‹è¨­è¨ˆ
- [2026-02-21] å¾Œç«¯å…¨éƒ¨å¯¦ä½œï¼ˆPDF æå–ã€æŒ¯ã‚Šä»®åæ¨™æ³¨ã€HTML ç”¢ç”Ÿã€FastAPI APIï¼‰â€” 24 tests passed
- [2026-02-21] å‰ç«¯å…¨éƒ¨å¯¦ä½œï¼ˆFileUploaderã€ProgressBarã€HtmlPreviewã€App æ•´åˆï¼‰â€” 7 tests passed
- [2026-02-21] ç«¯å°ç«¯æ•´åˆæ¸¬è©¦é€šéï¼ˆå¾Œç«¯ :8000 + å‰ç«¯ :5173ï¼‰
- [2026-02-21] å‰ç«¯åˆ†é åŠŸèƒ½è…¦åŠ›æ¿€ç›ªèˆ‡è¨­è¨ˆå®Œæˆï¼ˆæ–¹æ¡ˆ Cï¼šPagedPreview åŒ…è£å±¤ï¼‰
- [2026-02-21] UI é‡è¨­è¨ˆ Task 1-3 å®Œæˆï¼ˆè‰²å½© Tokenã€ProgressBarã€FileUploader é‡è¨­è¨ˆï¼Œ11 tests passedï¼‰
- [2026-02-21] UI é‡è¨­è¨ˆ Task 4 å®Œæˆï¼ˆHeader + App.tsx é‡æ§‹ï¼ŒAppState ç‹€æ…‹æ©Ÿï¼Œ11 tests passedï¼‰
- [2026-02-21] UI é‡è¨­è¨ˆ Task 5 å®Œæˆï¼ˆPagedPreview æ–°å¢ï¼Œå’Œé¢¨å°è¦½åˆ—ï¼Œ20 tests passedï¼‰
- [2026-02-21] UI é‡è¨­è¨ˆ Task 6 å®Œæˆï¼ˆApp.tsx æ›ç”¨ PagedPreviewã€åˆªé™¤ App.cssï¼Œ20 tests + build é€šéï¼‰
- [2026-02-21] ä¿®å¾©ç¸¦æ›¸ã PDF æå–ï¼šè‡ªå‹•åµæ¸¬æ’ç‰ˆæ–¹å‘ã€æŒ‰å³æ¬„â†’å·¦æ¬„è®€åºã€åˆä½µåŒæ¬„ç›¸é„° block â€” 26 tests passedï¼ˆ29 ç¢ç‰‡æ®µè½ â†’ 11 æœ‰æ„ç¾©æ®µè½ï¼‰
- [2026-02-21] TXT æ”¯æ´è¨­è¨ˆèˆ‡è¨ˆç•«å®Œæˆï¼ˆbrainstorming â†’ è¨­è¨ˆæ–‡ä»¶ â†’ 4-Task TDD å¯¦ä½œè¨ˆç•«ï¼‰
- [2026-02-21] TXT æ”¯æ´ Task 1 å®Œæˆï¼šæ–°å¢ `txt_extractor.py`ï¼ˆ6 tests passedï¼‰
- [2026-02-21] TXT æ”¯æ´ Task 2 å®Œæˆï¼š`convert.py` æ”¯æ´ `.txt` åˆ†æ´¾ï¼Œ33 tests passed
- [2026-02-21] TXT æ”¯æ´ Task 3 å®Œæˆï¼š`api.ts` `convertPdf` æ”¹å `convertFile`ï¼Œå‰ç«¯ 20 tests passed
- [2026-02-21] TXT æ”¯æ´ Task 4 å®Œæˆï¼š`FileUploader` æ”¯æ´ `.txt` æ‹–æ”¾èˆ‡é¸æ“‡ï¼Œå‰ç«¯ 22 tests passed
- [2026-02-21] TXT è…³æœ¬æ’ç‰ˆä¿ç•™ï¼š`generate_html_from_script_txt` é€è¡Œè™•ç†ï¼Œ`---` è®Š `<hr>`ï¼Œæ—¥æ–‡åŠ æŒ¯ã‚Šä»®åï¼Œè‹±æ–‡ç¿»è­¯ä¿ç•™åŸæ–‡ï¼Œ39 tests passed
- [2026-02-21] ç¿»è­¯åŠŸèƒ½ Task 1 å®Œæˆï¼šæ–°å¢ `translator.py`ï¼ˆæ”¯æ´ DeepL / Google / Claudeï¼Œ8 tests passedï¼‰

## å°ˆæ¡ˆçµæ§‹

```
asmr_pdf_script_add_Furigana/
â”œâ”€â”€ backend/              # Python FastAPI å¾Œç«¯ï¼ˆå®Œæˆï¼‰
â”‚   â”œâ”€â”€ app/
â”‚   â”‚   â”œâ”€â”€ main.py       # FastAPI å…¥å£ + CORS
â”‚   â”‚   â”œâ”€â”€ routers/      # API è·¯ç”±
â”‚   â”‚   â””â”€â”€ services/     # PDF æå–ã€æŒ¯ã‚Šä»®åã€HTML ç”¢ç”Ÿ
â”‚   â”œâ”€â”€ tests/
â”‚   â””â”€â”€ requirements.txt
â”œâ”€â”€ frontend/             # React + Vite å‰ç«¯ï¼ˆå®Œæˆï¼Œå’Œé¢¨ UI + åˆ†é ï¼‰
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ components/   # FileUploader, ProgressBar, HtmlPreview, PagedPreview
â”‚   â”‚   â””â”€â”€ services/     # API å‘¼å«
â”‚   â””â”€â”€ package.json
â”œâ”€â”€ docs/plans/           # é€²è¡Œä¸­çš„è¨­è¨ˆèˆ‡å¯¦ä½œæ–‡ä»¶
â”‚   â”œâ”€â”€ 2026-02-21-ui-redesign-design.md # ç¾è¡Œè¨­è¨ˆæ–‡ä»¶ï¼ˆå’Œé¢¨ç¾ä»£ä¸»é¡Œï¼‰
â”‚   â””â”€â”€ 2026-02-21-ui-redesign-plan.md   # ç¾è¡Œå¯¦ä½œè¨ˆç•«ï¼ˆ6 Tasksï¼‰
â””â”€â”€ .claude/
```

## é‡è¦æ±ºç­–ç´€éŒ„

| æ—¥æœŸ | æ±ºç­– | ç†ç”± |
|------|------|------|
| 2026-02-13 | PDF è§£æä½¿ç”¨ PyMuPDF | é€Ÿåº¦æœ€å¿«ã€CJK æ”¯æ´ä½³ |
| 2026-02-13 | æ—¥æ–‡åˆ†è©ä½¿ç”¨ fugashi + unidic-lite (MeCab) | æ¥­ç•Œæ¨™æº–ã€è®€éŸ³æº–ç¢ºåº¦æœ€é«˜ |
| 2026-02-13 | è¼¸å‡ºç‚º HTML æ­é… ruby æ¨™ç±¤ | ç€è¦½å™¨åŸç”Ÿæ”¯æ´æŒ¯ã‚Šä»®åé¡¯ç¤º |
| 2026-02-13 | å‰å¾Œç«¯åˆ†é›¢ï¼ˆFastAPI + Reactï¼‰ | è·è²¬æ¸…æ¥šã€é–‹ç™¼å½ˆæ€§é«˜ |
| 2026-02-21 | åˆ†é æ¡æ–¹æ¡ˆ Cï¼ˆPagedPreview åŒ…è£å±¤ï¼‰ | Container/Presentational æ¨¡å¼ï¼Œæ“´å±•æ€§æœ€ä½³ |
| 2026-02-21 | UI é‡è¨­è¨ˆæ¡æ–¹æ¡ˆ Aï¼ˆå’Œç´™å¡ç‰‡å¼ï¼‰ | ç›®æ¨™ç”¨æˆ¶ç‚ºæ—¥èªå­¸ç¿’è€…ï¼Œå’Œé¢¨ç¾ä»£æœ€ç¬¦åˆæ°›åœ |
| 2026-02-21 | èˆŠåˆ†é è¨ˆç•«ä½µå…¥ UI é‡è¨­è¨ˆè¨ˆç•«ï¼ˆTask 5ï¼‰ | é¿å…é›™è»Œç¶­è­·ï¼Œçµ±ä¸€åœ¨ ui-redesign-plan.md |
| 2026-02-21 | pdf_extractor æ–°å¢ç¸¦æ›¸ãåµæ¸¬èˆ‡æ¬„ä½åˆä½µé‚è¼¯ | åŸ get_text("blocks") æ¯å€‹ box ç¨ç«‹ â†’ åŠ å…¥æ©«/ç¸¦æ’è‡ªå‹•åµæ¸¬ |

## å”ä½œè€…ç´€éŒ„

- @Claude â€” 2026-02-13 â€” éœ€æ±‚æ¢è¨ã€è¨­è¨ˆèˆ‡å¯¦ä½œè¨ˆç•«
- @Claude â€” 2026-02-21 â€” å¾Œç«¯ + å‰ç«¯å…¨éƒ¨å¯¦ä½œï¼ˆTask 1â€“12ï¼Œç«¯å°ç«¯é©—è­‰é€šéï¼‰
- @Claude â€” 2026-02-21 â€” å‰ç«¯åˆ†é åŠŸèƒ½è…¦åŠ›æ¿€ç›ªã€è¨­è¨ˆæ–‡ä»¶ã€å¯¦ä½œè¨ˆç•«
- @Claude â€” 2026-02-21 â€” UI é‡è¨­è¨ˆè…¦åŠ›æ¿€ç›ªã€è¨­è¨ˆæ–‡ä»¶ã€å¯¦ä½œè¨ˆç•«ï¼ˆå’Œé¢¨ç¾ä»£ä¸»é¡Œï¼‰
